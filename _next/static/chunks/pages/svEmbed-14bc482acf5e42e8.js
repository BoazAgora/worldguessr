(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[746],{3783:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(7876),o=n(4232),s=n(9276),a=n(7328);let l=()=>{let[e,t]=(0,o.useState)({nm:!1,npz:!1,showRoadLabels:!0,lat:null,long:null,showAnswer:!1,hidden:!1});return(0,o.useEffect)(()=>{{let e=new URLSearchParams(window.location.search);t({nm:"true"===e.get("nm"),npz:"true"===e.get("npz"),showRoadLabels:"false"!==e.get("showRoadLabels"),lat:parseFloat(e.get("lat")),long:parseFloat(e.get("long")),showAnswer:"true"===e.get("showAnswer"),hidden:"true"===e.get("hidden")})}},[]),(0,o.useEffect)(()=>{let n=n=>{n.data&&"object"==typeof n.data&&"updateProps"===n.data.type&&t({...e,...n.data.props})};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}},[e]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a,{children:(0,r.jsx)("script",{src:"https://maps.googleapis.com/maps/api/js?v=weekly",defer:!0})}),(0,r.jsx)(s.A,{nm:e.nm,npz:e.npz,showRoadLabels:e.showRoadLabels,lat:e.lat,long:e.long,showAnswer:e.showAnswer,hidden:e.hidden,onLoad:()=>{console.log("StreetView Loaded"),window.parent.postMessage({type:"onLoad"},"*")}})]})}},4551:(e,t,n)=>{"use strict";function r(){try{var e;null==(e=document.querySelector("a[rel=noopener]"))||e.remove()}catch(e){}}n.d(t,{A:()=>r})},7328:(e,t,n)=>{e.exports=n(9836)},7572:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/svEmbed",function(){return n(3783)}])},9276:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(7876),o=n(4232),s=n(4551);let a=e=>{let{nm:t=!1,npz:n=!1,showRoadLabels:a=!0,lat:l,long:c,showAnswer:i=!1,hidden:u=!1,onLoad:d}=e,p=(0,o.useRef)(null),g=(0,o.useRef)(null),m=(0,o.useRef)(null),h=(0,o.useRef)(null),w=(0,o.useRef)(null),E=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=Element.prototype.appendChild;Element.prototype.appendChild=function(t){return"SCRIPT"===t.tagName&&t.src.includes("QuotaService.RecordEvent")?t:e.call(this,t)};let t=new MutationObserver(e=>{for(let t of e)for(let e of t.addedNodes)("STYLE"===e.tagName&&"undefined"===e.getAttribute("nonce")||e.innerText.includes(".mapsConsumerUiSceneCoreScene__root")||e.innerText.includes(".dismissButton"))&&e.parentNode.removeChild(e)});return t.observe(document.head,{childList:!0}),()=>{Element.prototype.appendChild=e,t.disconnect()}},[]);let v=(0,o.useRef)(null),[f,_]=(0,o.useState)(!0),L="googlemaps",y=a&&(!t&&!n||t&&n);window.reloadLoc=()=>{if(y){let e=document.getElementById("streetview");e&&(e.src=e.src)}else v.current&&(v.current.setVisible(!1),v.current=null),b()};let b=()=>{l&&c&&document.getElementById(L)&&(v.current=new google.maps.StreetViewPanorama(document.getElementById(L),{position:{lat:l,lng:c},pov:{heading:0,pitch:0},zoom:0,motionTracking:!1,linksControl:!(t&&!i),clickToGo:!(t&&!i),panControl:!(n&&!i),zoomControl:!(n&&!i),showRoadLabels:a,disableDefaultUI:!0}),setTimeout(()=>{v.current.setPov(v.current.getPhotographerPov()),v.current.setZoom(0)},100),d(),v.current.addListener("pano_changed",()=>{_(!1),document.querySelectorAll('meta[http-equiv="origin-trial"]').forEach(e=>e.remove()),(0,s.A)(),setTimeout(()=>{(0,s.A)()},1e3);let e=v.current.getPano(),t=v.current.getPosition();console.log("REPLAY_EVENT:",{type:"pano_changed",timestamp:Date.now(),panoId:e,position:{lat:t.lat(),lng:t.lng()}})}),v.current.addListener("position_changed",()=>{let e=v.current.getPosition(),n=e.lat(),r=e.lng();console.log("REPLAY_EVENT:",{type:"position_changed",timestamp:Date.now(),position:{lat:n,lng:r}}),t&&!i&&n!==l&&r!==c&&v.current.setPosition({lat:l,lng:c})}),v.current.addListener("pov_changed",()=>{(e=>{let t=Date.now();h.current&&clearTimeout(h.current),E.current={type:"pov_changed",timestamp:t,pov:{heading:e.heading,pitch:e.pitch}},!g.current||t-g.current>=500?(console.log("REPLAY_EVENT:",E.current),g.current=t):h.current=setTimeout(()=>{E.current&&(console.log("REPLAY_EVENT:",{...E.current,timestamp:Date.now()}),g.current=Date.now(),E.current=null)},500)})(v.current.getPov())}),v.current.addListener("zoom_changed",()=>{(e=>{let t=Date.now();m.current&&clearTimeout(m.current),w.current={type:"zoom_changed",timestamp:t,zoom:e},!p.current||t-p.current>=500?(console.log("REPLAY_EVENT:",w.current),p.current=t):m.current=setTimeout(()=>{w.current&&(console.log("REPLAY_EVENT:",{...w.current,timestamp:Date.now()}),p.current=Date.now(),w.current=null)},500)})(v.current.getZoom())}),v.current.addListener("visible_changed",()=>{let e=v.current.getVisible();console.log("REPLAY_EVENT:",{type:"visible_changed",timestamp:Date.now(),visible:e})}),v.current.addListener("status_changed",()=>{let e=v.current.getStatus();console.log("REPLAY_EVENT:",{type:"status_changed",timestamp:Date.now(),status:e})}))};return((0,o.useEffect)(()=>(_(!0),y?v.current&&(v.current.setVisible(!1),v.current=null):b(),()=>{m.current&&clearTimeout(m.current),h.current&&clearTimeout(h.current),v.current&&(google.maps.event.clearListeners(v.current,"pano_changed"),google.maps.event.clearListeners(v.current,"position_changed"),google.maps.event.clearListeners(v.current,"pov_changed"),google.maps.event.clearListeners(v.current,"zoom_changed"),google.maps.event.clearListeners(v.current,"visible_changed"),google.maps.event.clearListeners(v.current,"status_changed"),v.current.setVisible(!1),v.current=null)}),[l,c,t,n,a,y]),(0,o.useEffect)(()=>{i&&!y&&(console.log("temporarily disabling nm,npz"),v.current.setOptions({linksControl:!0,clickToGo:!0,panControl:!1,zoomControl:!1}))},[i]),l||c)?y?(0,r.jsx)("iframe",{className:"".concat(n&&t&&!i?"nmpz":""," ").concat(u?"hidden":""," streetview"),src:"https://www.google.com/maps/embed/v1/streetview?location=".concat(l,",").concat(c,"&key=AIzaSyA2fHNuyc768n9ZJLTrfbkWLNK3sLOK-iQ&fov=100&language=iw"),referrerPolicy:"no-referrer-when-downgrade",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; picture-in-picture",onLoad:()=>{_(!1),d&&l&&c&&d()},style:{width:"100vw",height:"calc(100vh + 300px)",zIndex:100,transform:"translateY(-285px)"},id:"streetview"}):(0,r.jsx)("div",{id:L,className:"streetview inverted ".concat(f||u?"hidden":"","\n      ").concat(n&&!i?"nmpz":"","\n      ")}):null}}},e=>{e.O(0,[636,593,792],()=>e(e.s=7572)),_N_E=e.O()}]);