(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[890],{409:(e,t,n)=>{"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window;try{n.gtag("event",e,t)}catch(e){console.log("error sending gtag event",e)}}n.d(t,{A:()=>a})},858:(e,t,n)=>{"use strict";n.d(t,{W:()=>o,a:()=>r});let a=[];function r(){try{return window.self!==window.top}catch(e){return!0}}function o(){try{return r()&&a.some(e=>{var t,n,a;return(null!=(a=null==(n=window)||null==(t=n.location)?void 0:t.ancestorOrigins[0])?a:document.referrer).includes(e)})}catch(e){return console.error("Piracy detection error",e),!1}}},1213:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var a=n(7876),r=n(3679),o=n(4679),s=n(6336),l=n(1173),i=n(409);function c(e){var t,n,o,c,d,u;let{session:m,openAccountModal:h,navbarMode:p,inCrazyGames:g}=e,{t:f}=(0,l.B)("common");return!g||m&&(null==m||null==(t=m.token)?void 0:t.secret)?(0,a.jsx)(a.Fragment,{children:m&&(null==m||null==(n=m.token)?void 0:n.secret)?(0,a.jsx)("button",{className:"gameBtn ".concat(p?"navBtn":"accountBtn loggedIn"," ").concat((null==m||null==(c=m.token)?void 0:c.supporter)?"supporterBtn":""),onClick:()=>{h()},children:(null==m||null==(d=m.token)?void 0:d.username)?(0,a.jsx)("p",{style:{color:"white",paddingRight:"-13px",marginLeft:"0px",fontSize:"1.4em",fontWeight:700},children:null==m||null==(u=m.token)?void 0:u.username}):null}):(0,a.jsx)("button",{className:"gameBtn ".concat(p?"navBtn":"accountBtn"),disabled:g,onClick:()=>{null===m&&((0,i.A)("login_attempt"),(0,s.Jv)("google"))},children:(null==m||null==(o=m.token)?void 0:o.secret)||null===m?(0,a.jsx)("div",{style:{marginRight:"10px",marginLeft:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:g?(0,a.jsx)(a.Fragment,{children:"..."}):(0,a.jsxs)(a.Fragment,{children:[f("login"),"\xa0\xa0",(0,a.jsx)(r.DSS,{className:"home__squarebtnicon"})]})}):"..."})}):null}var d=n(6059),u=n(4250),m=n(4232);function h(e){let{connected:t,shown:n,onClick:r,connecting:o}=e,[s,l]=(0,m.useState)(!1),[i,c]=(0,m.useState)(!1),[h,p]=(0,m.useState)(!1),g=(0,m.useRef)(t),f=(0,m.useRef)(null),w=(0,m.useRef)(Date.now());if((0,m.useEffect)(()=>{let e=g.current,n=Date.now()-w.current;if(f.current&&(clearTimeout(f.current),f.current=null),n<2e3&&t){l(!1),c(!1),p(!1),g.current=t;return}o?(l(!0),c(!1),p(!0),setTimeout(()=>p(!1),300)):t?t&&!e?(l(!0),c(!1),p(!1),f.current=setTimeout(()=>{c(!0),setTimeout(()=>{l(!1),c(!1)},300)},2e3)):(l(!1),c(!1),p(!1)):(l(!0),c(!1),p(!0),setTimeout(()=>p(!1),300)),g.current=t},[t,o]),(0,m.useEffect)(()=>()=>{f.current&&clearTimeout(f.current)},[]),!n||!s)return null;let x=()=>t?"#22c55e":o?"#f59e0b":"#ef4444";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{id:"a7d97ecb79e7aa48",children:"@keyframes pulse-connect{0%,100%{transform:scale(1);box-shadow:0 4px 16px rgba(0,0,0,.4)}50%{transform:scale(1.05);box-shadow:0 6px 20px rgba(245,158,11,.6)}}@keyframes pulse-disconnect{0%,100%{box-shadow:0 4px 16px rgba(0,0,0,.4)}50%{box-shadow:0 6px 20px rgba(239,68,68,.6)}}"}),(0,a.jsx)("div",{onClick:r,style:{position:"fixed",top:"100px",right:i||h?"-85px":"15px",zIndex:1e4,width:"70px",height:"70px",borderRadius:"15px",backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:r?"pointer":"default",boxShadow:"0 4px 16px rgba(0,0,0,0.4)",transition:i||h?"right 0.3s ease-out":"all 0.3s ease",border:"3px solid ".concat(x()),pointerEvents:"auto",animation:i||h?"none":o?"pulse-connect 1s ease-in-out infinite":t?"none":"pulse-disconnect 2s ease-in-out infinite",transform:h?"translateX(100px)":"translateX(0)"},onMouseEnter:e=>{o||(e.target.style.transform="scale(1.1)",e.target.style.boxShadow="0 6px 20px rgba(0,0,0,0.5)")},onMouseLeave:e=>{o||(e.target.style.transform="scale(1)",e.target.style.boxShadow="0 4px 16px rgba(0,0,0,0.4)")},title:t?"Connected to server":o?"Connecting to server...":"Connection lost - Click for details",className:"jsx-a7d97ecb79e7aa48",children:(0,a.jsx)(d._8$,{size:28,color:x()})})]})}function p(e){var t,n,s,i;let{maintenance:u,joinCodePress:p,inCrazyGames:g,inCoolMathGames:f,inGame:w,openAccountModal:x,shown:v,backBtnPressed:b,reloadBtnPressed:_,setGameOptionsModalShown:y,onNavbarPress:k,onFriendsPress:j,gameOptions:C,session:N,screen:A,multiplayerState:M,loading:S,gameOptionsModalShown:P,accountModalOpen:I,selectCountryModalShown:B,mapModalOpen:R,onConnectionError:L}=e,{t:E}=(0,l.B)("common"),T=((null==M?void 0:M.inGame)||"singleplayer"===A)&&!S&&!((null==M?void 0:M.inGame)&&(null==M||null==(t=M.gameData)?void 0:t.state)==="waiting"),[D,F]=(0,m.useState)(!0);return(0,m.useEffect)(()=>{window.location.search.includes("app=true")&&F(!1)},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"navbar ".concat(v?"":"hidden"," ").concat("home"==A?"":"navbarColor"," ").concat("onboarding"===A?"onboarding":""),children:[(0,a.jsxs)("div",{className:"nonHome ".concat("home"===A?"":"shown"),children:[!R&&(0,a.jsx)("h1",{className:"navbar__title desktop",onClick:k,children:"WorldGuessr"}),!R&&(0,a.jsx)("h1",{className:"navbar__title mobile",onClick:k,children:"WG"}),!P&&!I&&!B&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"gameBtn navBtn backBtn g2_red_button desktop",onClick:b,children:E("back")}),(0,a.jsx)("button",{className:"gameBtn navBtn backBtn g2_red_button mobile",onClick:b,children:(0,a.jsx)(r.QVr,{})})]})]}),T&&!I&&!P&&(0,a.jsx)("button",{className:"gameBtn navBtn backBtn reloadBtn g2_blue_button",onClick:_,children:(0,a.jsx)(d.QpL,{})}),(0,a.jsx)(h,{connected:null==M?void 0:M.connected,connecting:null==M?void 0:M.connecting,shown:!0,onClick:(null==M?void 0:M.connected)?void 0:L}),"multiplayer"===A&&(null==M?void 0:M.inGame)&&(null==M||null==(n=M.gameData)?void 0:n.players.length)>0&&(0,a.jsxs)("span",{id:"playerCnt",className:"bigSpan",children:["\xa0 ",(0,a.jsx)(r.x$1,{})," ",M.gameData.players.length]}),(0,a.jsxs)("div",{className:"navbar__right",children:["singleplayer"===A&&!I&&(0,a.jsxs)("button",{className:"gameBtn navBtn g2_green_button g2_lexend",disabled:S,onClick:()=>y(!0),children:["all"!==C.location&&C.location?(null==C?void 0:C.countryMap)?(0,o.A)(C.location):null==C?void 0:C.communityMapName:E("allCountries"),C.nm&&C.npz?", NMPZ":C.nm?", NM":C.npz?", NPZ":"","\xa0",(0,a.jsx)(d.dgZ,{size:20})]}),"onboarding"===A&&(0,a.jsx)("button",{className:"gameBtn navBtn",style:{backgroundColor:"blue"},onClick:p,children:E("joinGame")}),!w&&D&&!f&&!I&&!R&&(0,a.jsx)(c,{inCrazyGames:g,session:N,navbarMode:"home"!==A,openAccountModal:x}),(null==N||null==(s=N.token)?void 0:s.secret)&&!I&&!P&&!R&&!["getready","guess"].includes(null==M||null==(i=M.gameData)?void 0:i.state)&&(0,a.jsx)("button",{className:"gameBtn friendBtn ".concat("home"===A?"friendBtnFixed":""),onClick:j,disabled:!(null==M?void 0:M.connected),children:(0,a.jsx)(r.M5n,{size:40,className:"friendBtnIcon"})})]})]})})}},3603:(e,t,n)=>{"use strict";function a(){var e;let t=!window||"https:"===window.location.protocol;return{apiUrl:(t?"https":"http")+"://devapi.worldguessr.com",websocketUrl:(t?"wss":"ws")+"://"+((e="devserver.worldguessr.com",void 0!==e)?e:"localhost:3002")+"/wg"}}n.d(t,{A:()=>a})},4679:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(6107);let r={GB:"United Kingdom",US:"United States",RU:"Russia",KR:"South Korea"};function o(e){var t;return null!=(t=r[e])?t:a.JJ(e)}},6336:(e,t,n)=>{"use strict";n.d(t,{CI:()=>l,Jv:()=>i,dJ:()=>d,wV:()=>c});var a=n(858),r=n(2446),o=n(8207);let s=!1;function l(){window.localStorage.removeItem("wg_secret"),s=null,window.dontReconnect||(console.log("Removing cookies"),function(){for(var e=document.cookie.split("; "),t=0;t<e.length;t++)for(var n=window.location.hostname.split(".");n.length>0;){var a=encodeURIComponent(e[t].split(";")[0].split("=")[0])+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain="+n.join(".")+" ;path=",r=location.pathname.split("/");for(document.cookie=a+"/";r.length>0;)document.cookie=a+r.join("/"),console.log(a+r.join("/")),r.pop();n.shift()}}(),window.location.reload())}function i(){if(console.log("Signing in"),(0,a.a)()){console.log("In iframe");let e=window.location.href;window.open(e,"_blank")}window.login()}function c(){var e,t;if(window.location.hostname.includes("crazygames")&&window.verifyPayload&&"not_logged_in"===JSON.parse(window.verifyPayload).secret)return{data:null};if(!1===s&&!window.fetchingSession&&(null==(e=window.cConfig)?void 0:e.apiUrl)){let e=null;try{e=window.localStorage.getItem("wg_secret")}catch(e){console.error(e)}e?(window.fetchingSession=!0,console.log("[Auth] Starting authentication with retry mechanism"),o.A.fetchWithRetry((null==(t=window.cConfig)?void 0:t.apiUrl)+"/api/googleAuth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:e})},"googleAuth").then(e=>e.json()).then(e=>{if(window.fetchingSession=!1,console.log("[Auth] Authentication successful"),e.error){console.error("[Auth] Server error:",e.error),s=null;return}e.secret?(window.localStorage.setItem("wg_secret",e.secret),s={token:e},console.log("[Auth] Session established for user:",e.username)):(console.log("[Auth] No session data received, user not logged in"),s=null)}).catch(e=>{window.fetchingSession=!1,console.error("[Auth] Authentication failed after all retries:",e.message);try{window.localStorage.removeItem("wg_secret")}catch(e){console.warn("[Auth] Could not clear localStorage:",e)}s=null,o.A.getRetryCount("googleAuth")>=5&&r.oR.error("Connection issues detected. Please refresh the page if problems persist.")})):s=null}return{data:s}}function d(){var e;let t=null;if(s&&(null==s||null==(e=s.token)?void 0:e.secret))t=s.secret;else try{t=window.localStorage.getItem("wg_secret")}catch(e){console.error(e)}return t?{Authorization:"Bearer "+t}:{}}},7623:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var a=n(7876),r=n(4232),o=n(7328),s=n(9099),l=n(7703),i=n(1213),c=n(1173),d=n(3603),u=n(6336);function m(e){var t;let{}=e,n=(0,s.useRouter)(),[m,h]=(0,r.useState)(0),[p,g]=(0,r.useState)([]),[f,w]=(0,r.useState)(l.iframe),{t:x}=(0,c.B)("common"),[v,b]=(0,r.useState)({}),_=(0,r.useRef)(null),y=(0,r.useRef)(null),k=(0,r.useRef)([]),j=(0,r.useRef)(null),[C,N]=(0,r.useState)(0);(0,r.useEffect)(()=>{var e;let{apiUrl:t}=(0,d.A)(),a=new URLSearchParams(window.location.search),r=n.query.s||n.query.slug||a.get("s")||a.get("slug");console.log("also can be the format /map/slug");let o=window.location.pathname;o.startsWith("/map/")&&!r&&(r=o.split("/map/")[1]),r&&(console.log("fetching map data for",r,(0,u.dJ)()),fetch(t+"/api/map/publicData?slug=".concat(r),{headers:{authorization:null==(e=(0,u.dJ)())?void 0:e.authorization}}).then(async e=>{if(e.ok){let t=await e.json();console.log("fetched map data:",t),b(t.mapData)}else console.error("Failed to fetch map data:",e),404===e.status&&n.push("/404")}).catch(e=>{alert("An error occurred while fetching map data")}))},[]),(0,r.useEffect)(()=>{if(!v.data)return;let e=v.data.map(e=>"//www.google.com/maps/embed/v1/streetview?key=AIzaSyA2fHNuyc768n9ZJLTrfbkWLNK3sLOK-iQ&location=".concat(e.lat,",").concat(e.lng,"&fov=60"));g(e);let t=setInterval(()=>{w(l.iframe+" "+l.fadeOut),setTimeout(()=>{let t=Math.floor(Math.random()*e.length);h(t),A(t),w(l.iframe+" "+l.fadeIn)},1e3)},5e3);return window.intervalId=t,()=>clearInterval(t)},[v.data]);let A=e=>{N(e),k.current.forEach((t,n)=>{let a=n===e,r='\n        <div style="\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          background-color: '.concat(a?"#4CAF50":"#ffffff",";\n          border: 3px solid ").concat(a?"#ffffff":"#4CAF50",';\n          box-shadow: 0 2px 8px rgba(0,0,0,0.4);\n          cursor: pointer;\n          transition: all 0.3s ease;\n        "></div>\n      ');t.setIcon(window.L.divIcon({html:r,className:"custom-marker",iconSize:[26,26],iconAnchor:[13,13]}))}),j.current&&j.current.refreshClusters()};return(0,r.useEffect)(()=>{if(v.data&&!y.current){if(window.L)if(v.data.length>100&&!window.L.MarkerClusterGroup){let t=document.createElement("link");t.rel="stylesheet",t.href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css",document.head.appendChild(t);let n=document.createElement("link");n.rel="stylesheet",n.href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css",document.head.appendChild(n);let a=document.createElement("script");a.src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js",a.onload=e,document.head.appendChild(a)}else e();else{let t=document.createElement("link");t.rel="stylesheet",t.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(t);let n=document.createElement("script");n.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",n.onload=()=>{if(v.data.length>100){let t=document.createElement("link");t.rel="stylesheet",t.href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css",document.head.appendChild(t);let n=document.createElement("link");n.rel="stylesheet",n.href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css",document.head.appendChild(n);let a=document.createElement("script");a.src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js",a.onload=e,document.head.appendChild(a)}else e()},document.head.appendChild(n)}return()=>{y.current&&(y.current.remove(),y.current=null,k.current=[],j.current=null)}}function e(){if(y.current)return;let e=window.L.map(_.current,{center:[20,0],zoom:2,zoomControl:!0,scrollWheelZoom:!0,doubleClickZoom:!0,dragging:!0});window.L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd"}).addTo(e),y.current=e;let t=v.data.length>100,n=null;if(t&&window.L.MarkerClusterGroup&&(n=window.L.markerClusterGroup({maxClusterRadius:50,iconCreateFunction:function(e){let t=e.getChildCount(),n="small";return t>=100?n="large":t>=20&&(n="medium"),new window.L.DivIcon({html:"<div><span>".concat(t,"</span></div>"),className:"marker-cluster marker-cluster-".concat(n),iconSize:new window.L.Point(40,40)})}}),e.addLayer(n),j.current=n),v.data.forEach((a,r)=>{let o=r===C,s='\n          <div style="\n            width: 20px;\n            height: 20px;\n            border-radius: 50%;\n            background-color: '.concat(o?"#4CAF50":"#ffffff",";\n            border: 3px solid ").concat(o?"#ffffff":"#4CAF50",';\n            box-shadow: 0 2px 8px rgba(0,0,0,0.4);\n            cursor: pointer;\n            transition: all 0.3s ease;\n          "></div>\n        '),i=window.L.marker([a.lat,a.lng],{icon:window.L.divIcon({html:s,className:"custom-marker",iconSize:[26,26],iconAnchor:[13,13]})});i.on("click",()=>{h(r),A(r),window.intervalId&&(clearInterval(window.intervalId),window.intervalId=null),w(l.iframe+" "+l.fadeOut),setTimeout(()=>{w(l.iframe+" "+l.fadeIn)},500)}),t&&n?n.addLayer(i):i.addTo(e),k.current.push(i)}),v.data.length>0)if(t&&n)e.fitBounds(n.getBounds().pad(.1));else{let t=new window.L.featureGroup(k.current);e.fitBounds(t.getBounds().pad(.1))}}},[v.data]),(0,a.jsxs)("div",{className:l.container,children:[(0,a.jsxs)(o,{children:[(0,a.jsx)("title",{children:(null==v?void 0:v.name)?"".concat(v.name," - WorldGuessr"):""}),(0,a.jsx)("meta",{name:"description",content:"Explore the world on WorldGuessr, a free GeoGuessr alternative. "}),(0,a.jsx)("link",{rel:"icon",type:"image/x-icon",href:"/icon.ico"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"})]}),(0,a.jsx)("style",{children:"\n          .mainBody {\n            user-select: auto !important;\n            overflow: auto !important;\n          }\n\n          .custom-marker {\n            background: none !important;\n            border: none !important;\n          }\n\n          .custom-marker div:hover {\n            transform: scale(1.2);\n          }\n\n          .marker-cluster {\n            background-color: rgba(255, 255, 255, 0.8);\n            border: 2px solid #4CAF50;\n            border-radius: 50%;\n            text-align: center;\n            font-size: 12px;\n            font-weight: bold;\n            line-height: 36px;\n            color: #333;\n            cursor: pointer;\n          }\n\n          .marker-cluster-small {\n            background-color: rgba(76, 175, 80, 0.8);\n            color: white;\n          }\n\n          .marker-cluster-medium {\n            background-color: rgba(255, 152, 0, 0.8);\n            color: white;\n          }\n\n          .marker-cluster-large {\n            background-color: rgba(244, 67, 54, 0.8);\n            color: white;\n          }\n\n          .marker-cluster div {\n            width: 36px;\n            height: 36px;\n            margin-left: 2px;\n            margin-top: 2px;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n        "}),(0,a.jsxs)("main",{className:l.main,children:[(0,a.jsx)(i.A,{}),(null==v?void 0:v.name)&&(0,a.jsxs)(a.Fragment,{children:[v.in_review&&(0,a.jsx)("div",{className:l.statusMessage,children:(0,a.jsx)("p",{children:"⏳ This map is currently under review."})}),v.reject_reason&&(0,a.jsx)("div",{className:l.statusMessage,children:(0,a.jsxs)("p",{children:["❌ This map has been rejected: ",v.reject_reason]})})]}),(0,a.jsxs)("div",{className:l.branding,children:[(0,a.jsx)("h1",{children:"WorldGuessr"}),(0,a.jsx)("center",{children:(0,a.jsxs)("button",{onClick:()=>window.location.href="/".concat(window.location.search.includes("crazygames")?"?crazygames=true":""),className:l.backButton,children:["← ",x("backToGame")]})})]}),v.name&&(0,a.jsxs)("div",{className:l.mapHeader,children:[(0,a.jsxs)("div",{className:l.mapImage,children:[p.length>0&&(0,a.jsx)("div",{className:l.iframeContainer,children:(0,a.jsx)("iframe",{className:f,loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:p[m]})}),v.countryCode&&(0,a.jsx)("img",{src:"https://flagcdn.com/w2560/".concat(null==(t=v.countryCode)?void 0:t.toLowerCase(),".png"),style:{width:"100%",height:"100%",objectFit:"cover"}})]}),(0,a.jsxs)("div",{className:l.mapInfo,children:[(0,a.jsx)("h1",{children:v.name}),(0,a.jsx)("p",{children:v.description_short})]})]}),(null==v?void 0:v.name)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:l.playButton,onClick:()=>{window.location.href="/?map=".concat(v.countryCode||v.slug).concat(window.location.search.includes("crazygames")?"&crazygames=true":"")},children:"PLAY"}),v.data&&v.data.length>0&&(0,a.jsx)("div",{className:l.worldMapSection,children:(0,a.jsx)("div",{className:l.worldMapContainer,children:(0,a.jsx)("div",{ref:_,style:{width:"100%",height:"100%"}})})}),(0,a.jsxs)("div",{className:l.mapStats,children:[void 0!==v.plays&&(0,a.jsxs)("div",{className:l.stat,children:[(0,a.jsx)("span",{className:l.statIcon,children:"\uD83D\uDC65"}),(0,a.jsx)("span",{className:l.statValue,children:v.plays.toLocaleString()}),(0,a.jsx)("span",{className:l.statLabel,children:"Plays"})]}),v.data&&(0,a.jsxs)("div",{className:l.stat,children:[(0,a.jsx)("span",{className:l.statIcon,children:"\uD83D\uDCCD"}),(0,a.jsx)("span",{className:l.statValue,children:v.locationcnt.toLocaleString()}),(0,a.jsx)("span",{className:l.statLabel,children:"Locations"})]}),void 0!==v.hearts&&(0,a.jsxs)("div",{className:l.stat,children:[(0,a.jsx)("span",{className:l.statIcon,children:"❤️"}),(0,a.jsx)("span",{className:l.statValue,children:v.hearts.toLocaleString()}),(0,a.jsx)("span",{className:l.statLabel,children:"Hearts"})]})]}),(0,a.jsxs)("div",{className:l.mapDescription,children:[(0,a.jsx)("h2",{children:"About this map"}),v.description_long.split("\n").map((e,t)=>(0,a.jsx)("p",{children:e},t)),(0,a.jsxs)("p",{className:l.mapAuthor,children:["Created by ",(0,a.jsx)("strong",{children:v.created_by}),v.created_at&&" ".concat(v.created_at," ago")]})]})]})]})]})}n(2446)},7703:e=>{e.exports={container:"MapPage_container__xYWXo",main:"MapPage_main__9rDnn",branding:"MapPage_branding__HuPlP",backButton:"MapPage_backButton__hUtxm",statusMessage:"MapPage_statusMessage__gBAeq",mapHeader:"MapPage_mapHeader__3oQ9O",mapImage:"MapPage_mapImage__enP0P",iframeContainer:"MapPage_iframeContainer__qN9dy",iframe:"MapPage_iframe__EmsgL",fadeOut:"MapPage_fadeOut__I3Vau",fadeIn:"MapPage_fadeIn__4GKks",mapInfo:"MapPage_mapInfo__GI_qE",playButton:"MapPage_playButton__A22gH",worldMapSection:"MapPage_worldMapSection__PwwOU",worldMapContainer:"MapPage_worldMapContainer__xaRiW",mapStats:"MapPage_mapStats__q55sE",stat:"MapPage_stat__sxArn",statIcon:"MapPage_statIcon__KuDGT",statValue:"MapPage_statValue__F1uP_",statLabel:"MapPage_statLabel__9e1yA",mapDescription:"MapPage_mapDescription__ymrug",mapAuthor:"MapPage_mapAuthor__oups6",pageSlideIn:"MapPage_pageSlideIn__42_WF"}},8032:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/map",function(){return n(7623)}])},8207:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});class a{async fetchWithRetry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=this.retryAttempts.get(n)||0;console.log("[RetryFetch] Attempting ".concat(n," (attempt ").concat(a+1,"/").concat(this.maxRetries+1,")"));try{let a=new AbortController,r=setTimeout(()=>a.abort(),1e4),o=await fetch(e,{...t,signal:a.signal});if(clearTimeout(r),!o.ok)throw Error("HTTP ".concat(o.status,": ").concat(o.statusText));return this.retryAttempts.delete(n),console.log("[RetryFetch] Success for ".concat(n)),o}catch(r){if(console.warn("[RetryFetch] Error for ".concat(n,":"),r.message),a<this.maxRetries&&this.shouldRetry(r)){let r=Math.min(this.baseDelay*Math.pow(2,a),this.maxDelay);return console.log("[RetryFetch] Retrying ".concat(n," in ").concat(r,"ms...")),this.retryAttempts.set(n,a+1),new Promise(a=>{setTimeout(()=>{a(this.fetchWithRetry(e,t,n))},r)})}throw console.error("[RetryFetch] Failed ".concat(n," after ").concat(a+1," attempts:"),r.message),this.retryAttempts.delete(n),r}}shouldRetry(e){return"AbortError"===e.name||"TypeError"===e.name||e.message&&e.message.includes("fetch")||e.message&&e.message.includes("HTTP 5")}resetRetries(e){this.retryAttempts.delete(e),console.log("[RetryFetch] Reset retry count for ".concat(e))}getRetryCount(e){return this.retryAttempts.get(e)||0}constructor(){this.retryAttempts=new Map,this.maxRetries=5,this.baseDelay=1e3,this.maxDelay=3e4}}let r=new a}},e=>{e.O(0,[585,938,986,819,173,636,593,792],()=>e(e.s=8032)),_N_E=e.O()}]);