(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[890],{409:(e,n,a)=>{"use strict";function t(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=window;try{a.gtag("event",e,n)}catch(e){console.log("error sending gtag event",e)}}a.d(n,{A:()=>t})},1213:(e,n,a)=>{"use strict";a.d(n,{A:()=>g});var t=a(7876),s=a(3679),r=a(4679),l=a(6336),o=a(1173),c=a(409);function i(e){var n,a,r,i,d,u;let{session:m,openAccountModal:p,navbarMode:g,inCrazyGames:h}=e,{t:x}=(0,o.B)("common");return!h||m&&(null==m||null==(n=m.token)?void 0:n.secret)?(0,t.jsx)(t.Fragment,{children:m&&(null==m||null==(a=m.token)?void 0:a.secret)?(0,t.jsx)("button",{className:"gameBtn ".concat(g?"navBtn":"accountBtn loggedIn"," ").concat((null==m||null==(i=m.token)?void 0:i.supporter)?"supporterBtn":""),onClick:()=>{p()},children:(null==m||null==(d=m.token)?void 0:d.username)?(0,t.jsx)("p",{style:{color:"white",paddingRight:"-13px",marginLeft:"0px",fontSize:"1.4em",fontWeight:700},children:null==m||null==(u=m.token)?void 0:u.username}):null}):(0,t.jsx)("button",{className:"gameBtn ".concat(g?"navBtn":"accountBtn"),disabled:h,onClick:()=>{null===m&&((0,c.A)("login_attempt"),(0,l.Jv)("google"))},children:(null==m||null==(r=m.token)?void 0:r.secret)||null===m?(0,t.jsx)("div",{style:{marginRight:"10px",marginLeft:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:h?(0,t.jsx)(t.Fragment,{children:"..."}):(0,t.jsxs)(t.Fragment,{children:[x("login"),"\xa0\xa0",(0,t.jsx)(s.DSS,{className:"home__squarebtnicon"})]})}):"..."})}):null}var d=a(6059),u=a(4250),m=a(4232);function p(e){let{connected:n,shown:a,onClick:s,connecting:r}=e,[l,o]=(0,m.useState)(!1),[c,i]=(0,m.useState)(!1),[p,g]=(0,m.useState)(!1),h=(0,m.useRef)(n),x=(0,m.useRef)(r),_=(0,m.useRef)(null),f=(0,m.useRef)(null),b=(0,m.useRef)(null);if((0,m.useEffect)(()=>{let e=h.current,a=x.current;(_.current&&(clearTimeout(_.current),_.current=null),f.current&&(clearTimeout(f.current),f.current=null),r)?a?(b.current?Date.now()-b.current:0)>=3e3&&(o(!0),i(!1),g(!1)):(b.current=Date.now(),o(!1),i(!1),g(!1),f.current=setTimeout(()=>{o(!0),i(!1),g(!0),setTimeout(()=>g(!1),400)},3e3)):n?n&&!e?(b.current?Date.now()-b.current:0)>=3e3?(o(!0),i(!1),g(!1),_.current=setTimeout(()=>{i(!0),setTimeout(()=>{o(!1),i(!1)},400)},1500)):(o(!1),i(!1),g(!1)):n&&(o(!1),i(!1),g(!1)):(o(!0),i(!1),g(!0),setTimeout(()=>g(!1),400)),h.current=n,x.current=r},[n,r]),(0,m.useEffect)(()=>()=>{_.current&&clearTimeout(_.current),f.current&&clearTimeout(f.current)},[]),!a||!l)return null;let v=()=>n?"#22c55e":r?"#f59e0b":"#ef4444";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{id:"a7d97ecb79e7aa48",children:"@keyframes pulse-connect{0%,100%{transform:scale(1);box-shadow:0 4px 16px rgba(0,0,0,.4)}50%{transform:scale(1.05);box-shadow:0 6px 20px rgba(245,158,11,.6)}}@keyframes pulse-disconnect{0%,100%{box-shadow:0 4px 16px rgba(0,0,0,.4)}50%{box-shadow:0 6px 20px rgba(239,68,68,.6)}}"}),(0,t.jsx)("div",{onClick:s,style:{position:"fixed",top:"100px",right:c||p?"-85px":"15px",zIndex:1e4,width:"50px",height:"50px",borderRadius:"15px",backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:s?"pointer":"default",boxShadow:"0 4px 16px rgba(0,0,0,0.4)",transition:"right 0.4s ease-in-out, transform 0.4s ease-in-out, all 0.3s ease",border:"3px solid ".concat(v()),pointerEvents:"auto",animation:c||p?"none":r?"pulse-connect 1s ease-in-out infinite":n?"none":"pulse-disconnect 2s ease-in-out infinite",transform:p?"translateX(100px)":"translateX(0)"},onMouseEnter:e=>{r||(e.target.style.transform="scale(1.1)",e.target.style.boxShadow="0 6px 20px rgba(0,0,0,0.5)")},onMouseLeave:e=>{r||(e.target.style.transform="scale(1)",e.target.style.boxShadow="0 4px 16px rgba(0,0,0,0.4)")},title:n?"Connected to server":r?"Connecting to server...":"Connection lost - Click for details",className:"jsx-a7d97ecb79e7aa48",children:(0,t.jsx)(d._8$,{size:28,color:v()})})]})}function g(e){var n,a,l,c;let{maintenance:u,joinCodePress:g,inCrazyGames:h,inCoolMathGames:x,inGame:_,openAccountModal:f,shown:b,backBtnPressed:v,reloadBtnPressed:j,setGameOptionsModalShown:w,onNavbarPress:k,onFriendsPress:y,gameOptions:N,session:C,screen:M,multiplayerState:B,loading:P,gameOptionsModalShown:S,accountModalOpen:I,selectCountryModalShown:D,mapModalOpen:A,onConnectionError:L}=e,{t:R}=(0,o.B)("common"),z=((null==B?void 0:B.inGame)||"singleplayer"===M)&&!P&&!((null==B?void 0:B.inGame)&&(null==B||null==(n=B.gameData)?void 0:n.state)==="waiting"),[F,G]=(0,m.useState)(!0);return(0,m.useEffect)(()=>{window.location.search.includes("app=true")&&G(!1)},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"navbar ".concat(b?"":"hidden"," ").concat("home"==M?"":"navbarColor"," ").concat("onboarding"===M?"onboarding":""),children:[(0,t.jsxs)("div",{className:"nonHome ".concat("home"===M?"":"shown"),children:[!A&&(0,t.jsx)("h1",{className:"navbar__title desktop",onClick:k,children:"WorldGuessr"}),!A&&(0,t.jsx)("h1",{className:"navbar__title mobile",onClick:k,children:"WG"}),!S&&!I&&!D&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"gameBtn navBtn backBtn g2_red_button desktop",onClick:v,children:R("back")}),(0,t.jsx)("button",{className:"gameBtn navBtn backBtn g2_red_button mobile",onClick:v,children:(0,t.jsx)(s.QVr,{})})]})]}),z&&!I&&!S&&(0,t.jsx)("button",{className:"gameBtn navBtn backBtn reloadBtn g2_blue_button",onClick:j,children:(0,t.jsx)(d.QpL,{})}),(0,t.jsx)(p,{connected:null==B?void 0:B.connected,connecting:null==B?void 0:B.connecting,shown:!0,onClick:(null==B?void 0:B.connected)?void 0:L}),"multiplayer"===M&&(null==B?void 0:B.inGame)&&(null==B||null==(a=B.gameData)?void 0:a.players.length)>0&&(0,t.jsxs)("span",{id:"playerCnt",className:"bigSpan",children:["\xa0 ",(0,t.jsx)(s.x$1,{})," ",B.gameData.players.length]}),(0,t.jsxs)("div",{className:"navbar__right",children:["singleplayer"===M&&!I&&(0,t.jsxs)("button",{className:"gameBtn navBtn g2_green_button g2_lexend",disabled:P,onClick:()=>w(!0),children:["all"!==N.location&&N.location?(null==N?void 0:N.countryMap)?(0,r.A)(N.location):null==N?void 0:N.communityMapName:R("allCountries"),N.nm&&N.npz?", NMPZ":N.nm?", NM":N.npz?", NPZ":"","\xa0",(0,t.jsx)(d.dgZ,{size:20})]}),"onboarding"===M&&(0,t.jsx)("button",{className:"gameBtn navBtn",style:{backgroundColor:"blue"},onClick:g,children:R("joinGame")}),!_&&F&&!x&&!I&&!A&&(0,t.jsx)(i,{inCrazyGames:h,session:C,navbarMode:"home"!==M,openAccountModal:f}),(null==C||null==(l=C.token)?void 0:l.secret)&&!I&&!S&&!A&&!["getready","guess"].includes(null==B||null==(c=B.gameData)?void 0:c.state)&&(0,t.jsx)("button",{className:"gameBtn friendBtn ".concat("home"===M?"friendBtnFixed":""),onClick:y,disabled:!(null==B?void 0:B.connected),children:(0,t.jsx)(s.M5n,{size:40,className:"friendBtnIcon ".concat("home"===M?"friendBtnIconFixed":"")})})]})]})})}},4679:(e,n,a)=>{"use strict";a.d(n,{A:()=>r});var t=a(6107);let s={GB:"United Kingdom",US:"United States",RU:"Russia",KR:"South Korea"};function r(e){var n;return null!=(n=s[e])?n:t.JJ(e)}},7623:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>m});var t=a(7876),s=a(4232),r=a(7328),l=a(9099),o=a(7703),c=a(1213),i=a(1173),d=a(3603),u=a(6336);function m(e){var n;let{}=e,a=(0,l.useRouter)(),[m,p]=(0,s.useState)(0),[g,h]=(0,s.useState)([]),[x,_]=(0,s.useState)(o.iframe),{t:f}=(0,i.B)("common"),[b,v]=(0,s.useState)({});(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)([]),(0,s.useRef)(null);let[j,w]=(0,s.useState)(0);return(0,s.useEffect)(()=>{var e;let{apiUrl:n}=(0,d.A)(),t=new URLSearchParams(window.location.search),s=a.query.s||a.query.slug||t.get("s")||t.get("slug");console.log("also can be the format /map/slug");let r=window.location.pathname;r.startsWith("/map/")&&!s&&(s=r.split("/map/")[1]),s&&(console.log("fetching map data for",s,(0,u.dJ)()),fetch(n+"/api/map/publicData?slug=".concat(s),{headers:{authorization:null==(e=(0,u.dJ)())?void 0:e.authorization}}).then(async e=>{if(e.ok){let n=await e.json();console.log("fetched map data:",n),v(n.mapData)}else console.error("Failed to fetch map data:",e),404===e.status&&a.push("/404")}).catch(e=>{alert("An error occurred while fetching map data")}))},[]),(0,s.useEffect)(()=>{if(!b.data)return;let e=b.data.map(e=>"//www.google.com/maps/embed/v1/streetview?key=AIzaSyA2fHNuyc768n9ZJLTrfbkWLNK3sLOK-iQ&location=".concat(e.lat,",").concat(e.lng,"&fov=60"));h(e);let n=setInterval(()=>{_(o.iframe+" "+o.fadeOut),setTimeout(()=>{p(Math.floor(Math.random()*e.length)),_(o.iframe+" "+o.fadeIn)},1e3)},5e3);return window.intervalId=n,()=>clearInterval(n)},[b.data]),(0,t.jsxs)("div",{className:o.container,children:[(0,t.jsxs)(r,{children:[(0,t.jsx)("title",{children:(null==b?void 0:b.name)?"".concat(b.name," - WorldGuessr"):""}),(0,t.jsx)("meta",{name:"description",content:"Explore the world on WorldGuessr, a free GeoGuessr alternative. "}),(0,t.jsx)("link",{rel:"icon",type:"image/x-icon",href:"/icon.ico"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"})]}),(0,t.jsx)("style",{children:"\n          .mainBody {\n            user-select: auto !important;\n            overflow: auto !important;\n          }\n\n          .custom-marker {\n            background: none !important;\n            border: none !important;\n          }\n\n          .custom-marker div:hover {\n            transform: scale(1.2);\n          }\n\n          .marker-cluster {\n            background-color: rgba(255, 255, 255, 0.8);\n            border: 2px solid #4CAF50;\n            border-radius: 50%;\n            text-align: center;\n            font-size: 12px;\n            font-weight: bold;\n            line-height: 36px;\n            color: #333;\n            cursor: pointer;\n          }\n\n          .marker-cluster-small {\n            background-color: rgba(76, 175, 80, 0.8);\n            color: white;\n          }\n\n          .marker-cluster-medium {\n            background-color: rgba(255, 152, 0, 0.8);\n            color: white;\n          }\n\n          .marker-cluster-large {\n            background-color: rgba(244, 67, 54, 0.8);\n            color: white;\n          }\n\n          .marker-cluster div {\n            width: 36px;\n            height: 36px;\n            margin-left: 2px;\n            margin-top: 2px;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n        "}),(0,t.jsxs)("main",{className:o.main,children:[(0,t.jsx)(c.A,{}),(null==b?void 0:b.name)&&(0,t.jsxs)(t.Fragment,{children:[b.in_review&&(0,t.jsx)("div",{className:o.statusMessage,children:(0,t.jsx)("p",{children:"⏳ This map is currently under review."})}),b.reject_reason&&(0,t.jsx)("div",{className:o.statusMessage,children:(0,t.jsxs)("p",{children:["❌ This map has been rejected: ",b.reject_reason]})})]}),(0,t.jsxs)("div",{className:o.branding,children:[(0,t.jsx)("h1",{children:"WorldGuessr"}),(0,t.jsx)("center",{children:(0,t.jsxs)("button",{onClick:()=>window.location.href="/".concat(window.location.search.includes("crazygames")?"?crazygames=true":""),className:o.backButton,children:["← ",f("backToGame")]})})]}),b.name&&(0,t.jsxs)("div",{className:o.mapHeader,children:[(0,t.jsxs)("div",{className:o.mapImage,children:[g.length>0&&(0,t.jsx)("div",{className:o.iframeContainer,children:(0,t.jsx)("iframe",{className:x,loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:g[m]})}),b.countryCode&&(0,t.jsx)("img",{src:"https://flagcdn.com/w2560/".concat(null==(n=b.countryCode)?void 0:n.toLowerCase(),".png"),style:{width:"100%",height:"100%",objectFit:"cover"}})]}),(0,t.jsxs)("div",{className:o.mapInfo,children:[(0,t.jsx)("h1",{children:b.name}),(0,t.jsx)("p",{children:b.description_short})]})]}),(null==b?void 0:b.name)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:o.playButton,onClick:()=>{window.location.href="/?map=".concat(b.countryCode||b.slug).concat(window.location.search.includes("crazygames")?"&crazygames=true":"")},children:"PLAY"}),(0,t.jsxs)("div",{className:o.mapStats,children:[void 0!==b.plays&&(0,t.jsxs)("div",{className:o.stat,children:[(0,t.jsx)("span",{className:o.statIcon,children:"\uD83D\uDC65"}),(0,t.jsx)("span",{className:o.statValue,children:b.plays.toLocaleString()}),(0,t.jsx)("span",{className:o.statLabel,children:"Plays"})]}),b.data&&(0,t.jsxs)("div",{className:o.stat,children:[(0,t.jsx)("span",{className:o.statIcon,children:"\uD83D\uDCCD"}),(0,t.jsx)("span",{className:o.statValue,children:b.locationcnt.toLocaleString()}),(0,t.jsx)("span",{className:o.statLabel,children:"Locations"})]}),void 0!==b.hearts&&(0,t.jsxs)("div",{className:o.stat,children:[(0,t.jsx)("span",{className:o.statIcon,children:"❤️"}),(0,t.jsx)("span",{className:o.statValue,children:b.hearts.toLocaleString()}),(0,t.jsx)("span",{className:o.statLabel,children:"Hearts"})]})]}),(0,t.jsxs)("div",{className:o.mapDescription,children:[(0,t.jsx)("h2",{children:"About this map"}),b.description_long.split("\n").map((e,n)=>(0,t.jsx)("p",{children:e},n)),(0,t.jsxs)("p",{className:o.mapAuthor,children:["Created by ",(0,t.jsx)("strong",{children:b.created_by}),b.created_at&&" ".concat(b.created_at," ago")]})]})]})]})]})}a(2446)},7703:e=>{e.exports={container:"MapPage_container__xYWXo",main:"MapPage_main__9rDnn",branding:"MapPage_branding__HuPlP",backButton:"MapPage_backButton__hUtxm",statusMessage:"MapPage_statusMessage__gBAeq",mapHeader:"MapPage_mapHeader__3oQ9O",mapImage:"MapPage_mapImage__enP0P",iframeContainer:"MapPage_iframeContainer__qN9dy",iframe:"MapPage_iframe__EmsgL",fadeOut:"MapPage_fadeOut__I3Vau",fadeIn:"MapPage_fadeIn__4GKks",mapInfo:"MapPage_mapInfo__GI_qE",playButton:"MapPage_playButton__A22gH",worldMapSection:"MapPage_worldMapSection__PwwOU",worldMapContainer:"MapPage_worldMapContainer__xaRiW",mapStats:"MapPage_mapStats__q55sE",stat:"MapPage_stat__sxArn",statIcon:"MapPage_statIcon__KuDGT",statValue:"MapPage_statValue__F1uP_",statLabel:"MapPage_statLabel__9e1yA",mapDescription:"MapPage_mapDescription__ymrug",mapAuthor:"MapPage_mapAuthor__oups6",pageSlideIn:"MapPage_pageSlideIn__42_WF"}},8032:(e,n,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/map",function(){return a(7623)}])}},e=>{e.O(0,[585,938,986,819,552,636,593,792],()=>e(e.s=8032)),_N_E=e.O()}]);