"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{5027:(a,e,r)=>{r.r(e),r.d(e,{default:()=>n});var i=r(7876),t=r(4250),o=r(4232);function n(a){let{onCountryClick:e,gameMode:n,foundCountries:l,currentTarget:s,gameActive:u,onMapReady:d,onNextCountry:c,onGameComplete:m}=a,f=(0,o.useRef)(null),p=(0,o.useRef)(null),h=(0,o.useRef)({}),b=(0,o.useRef)(null),g=(0,o.useRef)([]),[w,y]=(0,o.useState)(!1),S=["Costa Rica","Nicaragua","Haiti","Dominican Rep.","El Salvador","Guatemala","Cuba","Honduras","United States of America","Canada","Mexico","Belize","Panama","Greenland","Trinidad and Tobago","Grenada","St. Vin. and Gren.","Barbados","Saint Lucia","Dominica","Antigua and Barb.","St. Kitts and Nevis","Jamaica","Bermuda","Indonesia","Malaysia","Cyprus","India","China","Israel","Palestine","Lebanon","Syria","South Korea","North Korea","Bhutan","Oman","Uzbekistan","Kazakhstan","Tajikistan","Mongolia","Vietnam","Cambodia","United Arab Emirates","Georgia","Azerbaijan","Turkey","Laos","Kyrgyzstan","Armenia","Iraq","Iran","Qatar","Saudi Arabia","Pakistan","Thailand","Kuwait","Timor-Leste","Brunei","Myanmar","Bangladesh","Afghanistan","Turkmenistan","Jordan","Nepal","Yemen","Philippines","Sri Lanka","Taiwan","Japan","Singapore","Bahrain","Chile","Bolivia","Peru","Argentina","Suriname","Guyana","Brazil","Uruguay","Ecuador","Colombia","Paraguay","Venezuela","Ethiopia","S. Sudan","Somalia","Kenya","Malawi","Tanzania","Morocco","Congo","Dem. Rep. Congo","Namibia","South Africa","Libya","Tunisia","Zambia","Sierra Leone","Guinea","Liberia","Central African Rep.","Sudan","Djibouti","Eritrea","C\xf4te d'Ivoire","Mali","Senegal","Nigeria","Benin","Angola","Botswana","Zimbabwe","Chad","Algeria","Mozambique","eSwatini","Burundi","Rwanda","Uganda","Lesotho","Cameroon","Gabon","Niger","Burkina Faso","Togo","Ghana","Guinea-Bissau","Egypt","Mauritania","Eq. Guinea","Gambia","Madagascar","Comoros","S\xe3o Tom\xe9 and Principe","Cabo Verde","France","Ukraine","Belarus","Lithuania","Russia","Czechia","Germany","Estonia","Latvia","Norway","Sweden","Finland","Luxembourg","Belgium","North Macedonia","Albania","Kosovo","Spain","Denmark","Romania","Hungary","Slovakia","Poland","Ireland","United Kingdom","Greece","Austria","Italy","Switzerland","Netherlands","Liechtenstein","Serbia","Croatia","Slovenia","Bulgaria","San Marino","Monaco","Andorra","Montenegro","Bosnia and Herz.","Portugal","Moldova","Vatican","Iceland","Malta","Papua New Guinea","Australia","Fiji","New Zealand","Kiribati","Marshall Is.","Cook Is.","Tonga","Samoa","Solomon Is.","Tuvalu","Nauru","Micronesia","Vanuatu","Palau"],M=a=>"world"===n?a.properties.ISO_A3||a.properties.NAME:a.properties.id||a.properties.NAME,C=()=>{let a=g.current.filter(a=>!l.has(M(a)));if(0===a.length)return void m();let e=a[Math.floor(Math.random()*a.length)];c({id:M(e),name:e.properties.NAME,feature:e})},x=async()=>{try{let a=(await r.e(805).then(r.t.bind(r,6895,19))).default;p.current&&p.current.remove();let e=a.map(f.current,{center:"world"===n?[20,0]:[39.8283,-98.5795],zoom:"world"===n?2:4,zoomControl:!0,scrollWheelZoom:!0,doubleClickZoom:!1,boxZoom:!1,keyboard:!1,dragging:!0,attributionControl:!1,minZoom:"world"===n?1:3,maxZoom:6});"world"===n?e.setMaxBounds([[-90,-180],[90,180]]):e.setMaxBounds([[24.396308,-125],[49.384358,-66.93457]]),a.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:"\xa9 OpenStreetMap contributors",maxZoom:18,subdomains:"abcd"}).addTo(e),p.current=e,await E(e,a)}catch(a){console.error("Error initializing map:",a)}},E=async(a,r)=>{try{let i;if("world"===n){let a=await fetch("/countryBounds.json");(i=await a.json()).features=i.features.filter(a=>S.includes(a.properties.NAME))}else{let a=await fetch("/public/mapguess/us-states.json");i=await a.json()}if(b.current=i,g.current=i.features,i.features.forEach(i=>{let t=r.geoJSON(i,{style:{fillColor:"#6c757d",weight:1,opacity:1,color:"#343a40",fillOpacity:.7}}).addTo(a),o=M(i),n=i.properties.NAME;t.on("click",()=>{u&&e&&e(n,o)}),h.current[o]=t}),y(!0),d){let a={id:M(i.features[0]),name:i.features[0].properties.NAME,feature:i.features[0]};d(i.features.length,a)}}catch(a){console.error("Error loading country data:",a)}};return(0,o.useEffect)(()=>{w&&Object.entries(h.current).forEach(a=>{let[e,r]=a;l.has(e)?r.setStyle({fillColor:"#198754",fillOpacity:.7,weight:1,opacity:1,color:"#198754"}):r.setStyle({fillColor:"#6c757d",weight:1,opacity:1,color:"#343a40",fillOpacity:.7})})},[l,w]),(0,o.useEffect)(()=>{w&&u&&g.current.length>0&&!s&&C()},[w,u]),(0,o.useEffect)(()=>{f.current&&x()},[n]),(0,o.useEffect)(()=>(f.current&&x(),()=>{p.current&&(p.current.remove(),p.current=null)}),[]),(0,o.useEffect)(()=>{s&&u&&h.current[s.id]&&l.has(s.id)&&setTimeout(()=>{C()},1e3)},[l,s,u]),(0,i.jsxs)("div",{className:"jsx-ef22d466b7f708ba leaflet-map-container",children:[(0,i.jsx)("div",{ref:f,className:"jsx-ef22d466b7f708ba leaflet-map"}),(0,i.jsx)(t,{id:"ef22d466b7f708ba",children:".leaflet-map-container.jsx-ef22d466b7f708ba{width:100%;height:100%;position:relative}.leaflet-map.jsx-ef22d466b7f708ba{width:100%;height:100%}.leaflet-container{background:#2c3e50}.leaflet-control-zoom{border:none!important;box-shadow:0 2px 10px rgba(0,0,0,.3)!important}.leaflet-control-zoom a{background:rgba(0,0,0,.8)!important;color:white!important;border:1px solid#444!important;width:30px!important;height:30px!important;line-height:30px!important;font-size:14px!important;font-weight:bold!important}.leaflet-control-zoom a:hover{background:rgba(74,158,255,.9)!important}@media(max-width:768px){.leaflet-control-zoom{transform:scale(1.2)}}"})]})}}}]);